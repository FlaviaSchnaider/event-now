{"ast":null,"code":"import{useState}from'react';import{useNavigate}from'react-router-dom';import{api}from'../utils/api';import QuestionForm from'../components/QuestionForm';import{v4 as uuidv4}from'uuid';import'./CreateEvent.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function CreateEvent(){const[title,setTitle]=useState('');const[description,setDescription]=useState('');const[questions,setQuestions]=useState([]);const[isLoading,setIsLoading]=useState(false);const navigate=useNavigate();const addQuestion=()=>{setQuestions([...questions,{id:uuidv4(),text:'',multi:false,options:['']}]);};const removeQuestion=()=>{if(questions.length>0){setQuestions(prev=>prev.slice(0,-1));}};const handleQuestionChange=(index,updated)=>{const newQuestions=[...questions];newQuestions[index]=updated;setQuestions(newQuestions);};const createEvent=async()=>{if(!title.trim()){alert(\"Por favor, adicione um título para o evento.\");return;}if(questions.length===0){alert(\"Adicione pelo menos uma pergunta ao evento.\");return;}setIsLoading(true);try{const formattedQuestions=questions.map(q=>({id:q.id,text:q.text,multi:q.multi,options:q.options.map((opt,i)=>({_id:String(i),text:opt}))}));const res=await api.post('/events',{title,description,questions:formattedQuestions});navigate(\"/evento-criado/\".concat(res.data.eventId));}catch(error){console.error(\"Erro ao criar evento:\",error);alert(\"Ocorreu um erro ao criar o evento. Tente novamente.\");}finally{setIsLoading(false);}};const canCreateEvent=title.trim()&&questions.length>0;return/*#__PURE__*/_jsx(\"div\",{className:\"page-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"create-event fade-in\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-section\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Criar Evento\"}),/*#__PURE__*/_jsx(\"p\",{className:\"subtitle\",children:\"Configure as perguntas que ajudar\\xE3o seu grupo a decidir\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",children:\"T\\xEDtulo do Evento\"}),/*#__PURE__*/_jsx(\"input\",{id:\"title\",className:\"title-description\",placeholder:\"Ex: Encontro do fim de semana\",value:title,onChange:e=>setTitle(e.target.value),maxLength:100})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Descri\\xE7\\xE3o (opcional)\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"description\",className:\"title-description textarea\",placeholder:\"Adicione mais detalhes sobre o evento...\",value:description,onChange:e=>setDescription(e.target.value),maxLength:300,rows:3})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"questions-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"questions-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Perguntas\"}),/*#__PURE__*/_jsx(\"hr\",{className:\"question-divider\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"questions-list\",children:[questions.map((q,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"question-wrapper\",children:[/*#__PURE__*/_jsx(QuestionForm,{question:q,index:i,onChange:handleQuestionChange}),/*#__PURE__*/_jsx(\"hr\",{className:\"question-divider\"})]},q.id)),questions.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"empty-icon\",children:\"\\uD83D\\uDCDD\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Nenhuma pergunta adicionada ainda\"}),/*#__PURE__*/_jsx(\"p\",{className:\"empty-subtitle\",children:\"Clique em \\\"Adicionar Pergunta\\\" para come\\xE7ar\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-buttons\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"question-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-secondary\",onClick:addQuestion,children:\"\\u2795 Adicionar Pergunta\"}),questions.length>0&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-secondary btn-remove\",onClick:removeQuestion,children:\"\\uD83D\\uDDD1\\uFE0F Remover \\xDAltima\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-primary \".concat(!canCreateEvent?'btn-disabled':''),onClick:createEvent,disabled:!canCreateEvent||isLoading,children:isLoading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"loading-spinner\"}),\"Criando...\"]}):/*#__PURE__*/_jsx(_Fragment,{children:\" Criar Evento\"})})]})]})});}","map":{"version":3,"names":["useState","useNavigate","api","QuestionForm","v4","uuidv4","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CreateEvent","title","setTitle","description","setDescription","questions","setQuestions","isLoading","setIsLoading","navigate","addQuestion","id","text","multi","options","removeQuestion","length","prev","slice","handleQuestionChange","index","updated","newQuestions","createEvent","trim","alert","formattedQuestions","map","q","opt","i","_id","String","res","post","concat","data","eventId","error","console","canCreateEvent","className","children","htmlFor","placeholder","value","onChange","e","target","maxLength","rows","question","type","onClick","disabled"],"sources":["C:/event-now/frontend/src/pages/CreateEvent.js"],"sourcesContent":["import { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { api } from '../utils/api';\nimport QuestionForm from '../components/QuestionForm';\nimport { v4 as uuidv4 } from 'uuid';\nimport './CreateEvent.css';\n\nexport default function CreateEvent() {\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [questions, setQuestions] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const navigate = useNavigate();\n\n  const addQuestion = () => {\n    setQuestions([...questions, { id: uuidv4(), text: '', multi: false, options: [''] }]);\n  };\n\n  const removeQuestion = () => {\n    if (questions.length > 0) {\n      setQuestions(prev => prev.slice(0, -1));\n    }\n  };\n\n  const handleQuestionChange = (index, updated) => {\n    const newQuestions = [...questions];\n    newQuestions[index] = updated;\n    setQuestions(newQuestions);\n  };\n\n  const createEvent = async () => {\n    if (!title.trim()) {\n      alert(\"Por favor, adicione um título para o evento.\");\n      return;\n    }\n    if (questions.length === 0) {\n      alert(\"Adicione pelo menos uma pergunta ao evento.\");\n      return;\n    }\n    setIsLoading(true);\n    try {\n      const formattedQuestions = questions.map(q => ({\n        id: q.id,\n        text: q.text,\n        multi: q.multi,\n        options: q.options.map((opt, i) => ({ _id: String(i), text: opt }))\n      }));\n      const res = await api.post('/events', {\n        title,\n        description,\n        questions: formattedQuestions\n      });\n      navigate(`/evento-criado/${res.data.eventId}`);\n    } catch (error) {\n      console.error(\"Erro ao criar evento:\", error);\n      alert(\"Ocorreu um erro ao criar o evento. Tente novamente.\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const canCreateEvent = title.trim() && questions.length > 0;\n\n  return (\n    <div className=\"page-container\">\n      <div className=\"create-event fade-in\">\n        <div className=\"header-section\">\n          <h1>Criar Evento</h1>\n          <p className=\"subtitle\">Configure as perguntas que ajudarão seu grupo a decidir</p>\n        </div>\n\n        <div className=\"form-section\">\n          <div className=\"input-group\">\n            <label htmlFor=\"title\">Título do Evento</label>\n            <input\n              id=\"title\"\n              className=\"title-description\"\n              placeholder=\"Ex: Encontro do fim de semana\"\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n              maxLength={100}\n            />\n          </div>\n\n          <div className=\"input-group\">\n            <label htmlFor=\"description\">Descrição (opcional)</label>\n            <textarea\n              id=\"description\"\n              className=\"title-description textarea\"\n              placeholder=\"Adicione mais detalhes sobre o evento...\"\n              value={description}\n              onChange={(e) => setDescription(e.target.value)}\n              maxLength={300}\n              rows={3}\n            />\n          </div>\n        </div>\n\n        <div className=\"questions-section\">\n          <div className=\"questions-header\">\n            <h2>Perguntas</h2>\n            <hr className=\"question-divider\" />\n          </div>\n\n          <div className=\"questions-list\">\n            {questions.map((q, i) => (\n              <div key={q.id} className=\"question-wrapper\">\n                <QuestionForm\n                  question={q}\n                  index={i}\n                  onChange={handleQuestionChange}\n                />\n                <hr className=\"question-divider\" />\n              </div>\n            ))}\n\n            {questions.length === 0 && (\n              <div className=\"empty-state\">\n                <div className=\"empty-icon\">📝</div>\n                <p>Nenhuma pergunta adicionada ainda</p>\n                <p className=\"empty-subtitle\">Clique em \"Adicionar Pergunta\" para começar</p>\n              </div>\n            )}\n          </div>\n        </div>\n\n        <div className=\"form-buttons\">\n          <div className=\"question-buttons\">\n            <button\n              type=\"button\"\n              className=\"btn-secondary\"\n              onClick={addQuestion}\n            >\n              ➕ Adicionar Pergunta\n            </button>\n            {questions.length > 0 && (\n              <button\n                type=\"button\"\n                className=\"btn-secondary btn-remove\"\n                onClick={removeQuestion}\n              >\n                🗑️ Remover Última\n              </button>\n            )}\n          </div>\n\n          <button\n            type=\"button\"\n            className={`btn-primary ${!canCreateEvent ? 'btn-disabled' : ''}`}\n            onClick={createEvent}\n            disabled={!canCreateEvent || isLoading}\n          >\n            {isLoading ? (\n              <>\n                <span className=\"loading-spinner\"></span>\n                Criando...\n              </>\n            ) : (\n              <> Criar Evento</>\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}